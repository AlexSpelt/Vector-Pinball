language: android
dist: trusty
android:
  components:
  
  # gradle build tools
  - build-tools-29.0.2
  
  # the SDK version used to compile the project
  - android-29
  
  # components
  - extra-google-m2repository
  - extra-android-m2repository
  
  # Specify at least one system image,
  # if you need to run emulator(s) during your tests
  - sys-img-x86-android-29
  
script:
  - ./gradle test
  
deploy:
  provider: releases
  api_key:
    secure: $GITHUB_AUTH_TOKEN
  file: "app/build/outputs/apk/debug/app-debug.apk"
  skip_cleanup: true
  on:
    tags: true
